import{a as h,b as y,c0 as k,aR as d,b4 as g,e,a3 as C,bI as I,bu as i,bi as o,I as F,bJ as G,E as S,b_ as b,ab as v,B as p,b5 as m,n as U,a7 as E}from"./index.f43af9c9.js";import{F as L}from"./FolderTree.1226396f.js";import{U as q,a as D}from"./user_group.fea77ba8.js";import"./index.439fb41c.js";const R=r=>{const u=h();return e(i,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[e(o,{mb:"0",get children(){return u(`users.permissions.${r.name}`)}}),e(b,{get checked(){return r.can},onChange:()=>r.onChange(!r.can)})]}})},P=()=>{const r=h(),{params:u,back:c}=y(),{id:a}=u,[t,s]=k({id:0,user_group_name:"",size:0,base_path:"",permission:0,disabled:!1}),[f,_]=d(()=>g.get(`/admin/user_group/get?id=${a}`));a&&(async()=>{const n=await _();m(n,s)})();const[$,w]=d(()=>g.post(`/admin/user_group/${a?"update":"create"}`,t));return e(E,{get loading(){return f()},get children(){return e(C,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[e(I,{get children(){return r(`global.${a?"edit":"add"}`)}}),e(i,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[e(o,{for:"user_group_name",display:"flex",alignItems:"center",get children(){return r("users.user_group_name")}}),e(F,{id:"user_group_name",get value(){return t.user_group_name},onInput:n=>s("user_group_name",n.currentTarget.value)})]}}),e(i,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[e(o,{for:"base_path",display:"flex",alignItems:"center",get children(){return r("users.base_path")}}),e(L,{id:"base_path",get value(){return t.base_path},onChange:n=>s("base_path",n),onlyFolder:!0})]}}),e(i,{w:"$full",required:!0,get children(){return[e(o,{display:"flex",alignItems:"center",get children(){return r("users.permission")}}),e(G,{w:"$full",wrap:"wrap",gap:"$2",get children(){return e(S,{each:q,children:(n,l)=>e(R,{name:n,get can(){return D.can(t.permission,l())},onChange:x=>{x?s("permission",t.permission|=1<<l()):s("permission",t.permission&=~(1<<l()))}})})}})]}}),e(i,{w:"fit-content",display:"flex",get children(){return e(b,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:n=>s("disabled",n.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return t.disabled},get children(){return r("users.disabled")}})}}),e(v,{spacing:"$2",get children(){return[e(p,{colorScheme:"accent",get loading(){return $()},onClick:async()=>{const n=await w();m(n,()=>{U.success(r("global.save_success")),c()})},get children(){return r(`global.${a?"save":"add"}`)}}),e(p,{onClick:async()=>{c()},get children(){return r("global.back")}})]}})]}})}})};export{P as default};
