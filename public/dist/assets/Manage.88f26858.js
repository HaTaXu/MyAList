import{a as k,b as I,aS as x,b5 as g,k as b,cC as $,e,ad as u,B as c,au as y,av as E,a6 as S,cD as H,cE as M,cF as w,E as m,cG as _,cH as P,cI as i,b6 as h,n as C,S as A,a3 as R,aC as W,aD as z,af as J}from"./index.0f128fa7.js";import{D as K}from"./DeletePopover.41755347.js";import{W as N}from"./Wether.2e5e157c.js";import{J as O,K as V}from"./index.a01b3991.js";const X=s=>{const l=k(),d=t=>`$${t?"success":"danger"}9`;return e(u,{spacing:"$0_5",get children(){return e(m,{each:W,children:(t,n)=>e(z,{get label(){return l(`users.permissions.${t}`)},get children(){return e(S,{boxSize:"$2",rounded:"$full",get bg(){return d(J.can(s.user,n()))}})}})})}})},Z=()=>{const s=k(),{to:l,params:d,back:t}=I(),{user_group_name:n}=d,[T,U]=x(()=>g.get(`/admin/user/listByUserGroup?userGroupName=${n}`)),[L,v]=b([]),o=async()=>{const r=await U();h(r,a=>v(a.content))};o();const[B,D]=$(r=>g.post(`/admin/user/delete?id=${r}`)),[F,G]=$(r=>g.post(`/admin/user/cancel_2fa?id=${r}`)),[p,f]=b("false");return e(R,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(u,{spacing:"$2",get children(){return[e(c,{colorScheme:"success",onClick:()=>{t()},onMouseEnter:()=>f("true"),onMouseLeave:()=>f("false"),css:{".display":{display:"none"}},get children(){return e(u,{spacing:"$3",get children(){return[e(y,{get classList(){return{display:p()==="true"}},height:"1.4em",width:"1.4em",as:O}),e(y,{get classList(){return{display:p()==="false"}},height:"1.4em",width:"1.4em",as:V}),E(()=>s(n))]}})}}),e(c,{colorScheme:"accent",get loading(){return T()},onClick:o,get children(){return s("global.refresh")}}),e(c,{onClick:()=>{l("/@manage/users/add")},get children(){return s("global.add")}})]}}),e(S,{w:"$full",overflowX:"auto",get children(){return e(H,{highlightOnHover:!0,dense:!0,get children(){return[e(M,{get children(){return e(w,{get children(){return[e(m,{each:["username","base_path","permission","available"],children:r=>e(_,{get children(){return s(`users.${r}`)}})}),e(_,{get children(){return s("global.operations")}})]}})}}),e(P,{get children(){return e(m,{get each(){return L()},children:r=>e(w,{get children(){return[e(i,{get children(){return r.username}}),e(i,{get children(){return r.base_path}}),e(i,{get children(){return e(X,{user:r})}}),e(i,{get children(){return e(N,{get yes(){return!r.disabled}})}}),e(i,{get children(){return e(u,{spacing:"$2",get children(){return[e(c,{onClick:()=>{l(`/@manage/userGroups/manage/${n}/${r.id}`)},get children(){return s("global.edit")}}),e(c,{colorScheme:"accent",get loading(){return F()===r.id},onClick:async()=>{const a=await G(r.id);h(a,()=>{C.success(s("users.cancel_2fa_success")),o()})},get children(){return s("users.cancel_2fa")}}),e(A,{get when(){return r.role==0},get children(){return e(K,{get name(){return r.username},get loading(){return B()===r.id},onClick:async()=>{const a=await D(r.id);h(a,()=>{C.success(s("global.delete_success")),o()})}})}})]}})}})]}})})}})]}})}})]}})};export{Z as default};
