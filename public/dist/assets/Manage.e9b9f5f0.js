import{a as w,b as D,c0 as L,aR as p,b4 as a,k as P,cA as f,e,ab as m,B as c,a6 as S,cB as R,cC as z,cD as _,E as b,cE as $,cF as A,cG as i,b5 as u,n as k,S as H,a3 as I,aA as W,aB as M,ad as O}from"./index.f43af9c9.js";import{D as V}from"./DeletePopover.f7eb1824.js";import{W as X}from"./Wether.59066c3e.js";const j=t=>{const o=w(),g=n=>`$${n?"success":"danger"}9`;return e(m,{spacing:"$0_5",get children(){return e(b,{each:W,children:(n,l)=>e(M,{get label(){return o(`users.permissions.${n}`)},get children(){return e(S,{boxSize:"$2",rounded:"$full",get bg(){return g(O.can(t.user,l()))}})}})})}})},Y=()=>{const t=w(),{to:o,params:g,back:n}=D(),{id:l}=g,[h,U]=L({id:0,user_group_name:"",size:0,base_path:"",permission:0,disabled:!1}),[q,C]=p(()=>a.get(`/admin/user_group/get?id=${l}`));l&&(async()=>{const r=await C();u(r,U)})(),p(()=>a.post("/admin/user_group/update",h));const[T,y]=p(()=>a.get("/admin/user/list")),[G,B]=P([]),d=async()=>{const r=await y();u(r,s=>B(s.content))};d();const[v,E]=f(r=>a.post(`/admin/user/delete?id=${r}`)),[F,x]=f(r=>a.post(`/admin/user/cancel_2fa?id=${r}`));return e(I,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(m,{spacing:"$2",get children(){return[e(c,{onClick:()=>{n()},get children(){return t(h.user_group_name)}}),e(c,{colorScheme:"accent",get loading(){return T()},onClick:d,get children(){return t("global.refresh")}}),e(c,{onClick:()=>{o("/@manage/users/add")},get children(){return t("global.add")}})]}}),e(S,{w:"$full",overflowX:"auto",get children(){return e(R,{highlightOnHover:!0,dense:!0,get children(){return[e(z,{get children(){return e(_,{get children(){return[e(b,{each:["username","base_path","permission","available"],children:r=>e($,{get children(){return t(`users.${r}`)}})}),e($,{get children(){return t("global.operations")}})]}})}}),e(A,{get children(){return e(b,{get each(){return G()},children:r=>e(_,{get children(){return[e(i,{get children(){return r.username}}),e(i,{get children(){return r.base_path}}),e(i,{get children(){return e(j,{user:r})}}),e(i,{get children(){return e(X,{get yes(){return!r.disabled}})}}),e(i,{get children(){return e(m,{spacing:"$2",get children(){return[e(c,{onClick:()=>{o(`/@manage/userGroups/manage/${h.id}/${r.id}`)},get children(){return t("global.edit")}}),e(c,{colorScheme:"accent",get loading(){return F()===r.id},onClick:async()=>{const s=await x(r.id);u(s,()=>{k.success(t("users.cancel_2fa_success")),d()})},get children(){return t("users.cancel_2fa")}}),e(H,{get when(){return r.role==0},get children(){return e(V,{get name(){return r.username},get loading(){return v()===r.id},onClick:async()=>{const s=await E(r.id);u(s,()=>{k.success(t("global.delete_success")),d()})}})}})]}})}})]}})})}})]}})}})]}})};export{Y as default};
